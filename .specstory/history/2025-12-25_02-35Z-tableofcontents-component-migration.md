<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session dca8e96a-7334-4dc4-98c3-2deafcdaf861 (2025-12-25 02:35Z) -->

# TableOfContents component migration (2025-12-25 02:35Z)

_**User (2025-12-24 21:30Z)**_

@apps/docs/src/lib/TableOfContents.tsx I want to extract this from the docs and put it in hip-ui @.cursor/rules/hip-component.mdc

---

_**Agent (model default, mode Agent)**_

---

Reviewing the component structure and dependencies, then moving it to hip-ui.

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: packages/hip-ui/src/components/theme/types.ts</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: packages/hip-ui/src/cli/install.tsx</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="search" data-tool-name="codebase_search">
<details>
                <summary>Tool use: **codebase_search** • Searched codebase "How are components structured in hip-ui with theme imports?" • **15** results</summary>
            
| File | Lines |
|------|-------|
| `packages/hip-ui/src/components/theme/color.stylex.tsx` | L38 |
| `packages/hip-ui/src/components/button/button-config.ts` | L50 |
| `packages/hip-ui/src/components/card/card-config.ts` | L9 |
| `packages/hip-ui/src/components/theme/semantic-color.stylex.tsx` | L93 |
| `packages/hip-ui/src/components/content/content-config.ts` | L10 |
| `packages/hip-ui/src/components/header-layout/header-layout-config.ts` | L13 |
| `packages/hip-ui/src/components/color-field/color-field-config.ts` | L16 |
| `packages/hip-ui/src/components/text-field/text-field-config.ts` | L16 |
| `packages/hip-ui/src/components/combobox/combobox-config.ts` | L14 |
| `packages/hip-ui/src/components/badge/badge-config.ts` | L12 |
| `packages/hip-ui/src/components/search-field/search-field-config.ts` | L16 |
| `packages/hip-ui/src/components/typography/typography-config.ts` | L13 |
| `packages/hip-ui/src/components/tabs/tabs-config.ts` | L17 |
| `packages/hip-ui/src/components/tree/tree-config.ts` | L16 |
| `packages/hip-ui/src/components/navbar/navbar-config.ts` | L23 |

</details>
</tool-use>

---

---

Checking theme files for available exports:

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: packages/hip-ui/src/components/theme/color.stylex.tsx</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: packages/hip-ui/src/components/theme/animations.stylex.tsx</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: packages/hip-ui/src/components/theme/spacing.stylex.tsx</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: packages/hip-ui/src/components/theme/typography.stylex.tsx</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="search" data-tool-name="grep">
<details>
<summary>Tool use: **grep** • Grep for "TableOfContents" in "apps/docs/src" • 3 matches</summary>

Output mode: content

| File                                    | Content                                                                       | Line |
| --------------------------------------- | ----------------------------------------------------------------------------- | ---- |
| `apps/docs/src/routes/docs.$.tsx`       | `import \{ TableOfContents \} from "@/lib/TableOfContents";`                  | L50  |
| `apps/docs/src/routes/docs.$.tsx`       | `\{toc && <TableOfContents toc=\{toc\} style=\{styles.tableOfContents\} />\}` | L310 |
| `apps/docs/src/lib/TableOfContents.tsx` | `export function TableOfContents(\{`                                          | L118 |

</details>
</tool-use>

---

---

Checking where TableOfContents is used in the docs:

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: apps/docs/src/routes/docs.$.tsx</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="search" data-tool-name="grep">
<details>
<summary>Tool use: **grep** • Grep for "@stefanprobst/rehype-extract-toc" in "apps/docs" • 6 matches</summary>

Output mode: content

| File                                    | Content                                                               | Line |
| --------------------------------------- | --------------------------------------------------------------------- | ---- |
| `apps/docs/src/lib/TableOfContents.tsx` | `import \{ Toc, TocEntry \} from "@stefanprobst/rehype-extract-toc";` | L1   |
| `apps/docs/package.json`                | `"@stefanprobst/rehype-extract-toc": "^3.0.0",`                       | L22  |
| `apps/docs/vite.config.ts`              | `import withToc from "@stefanprobst/rehype-extract-toc";`             | L5   |
| `apps/docs/vite.config.ts`              | `import withTocExport from "@stefanprobst/rehype-extract-toc/mdx";`   | L6   |
| `apps/docs/src/types/virtual.d.ts`      | `import \{ Toc \} from "@stefanprobst/rehype-extract-toc";`           | L4   |
| `apps/docs/src/types/mdx.d.ts`          | `import type \{ Toc \} from "@stefanprobst/rehype-extract-toc";`      | L2   |

</details>
</tool-use>

---

---

Creating the initial todo list and starting the migration:

---

<tool-use data-tool-type="task" data-tool-name="todo_write">
<details><summary>Tool use: **todo_write** • Todo List</summary>

- [-] Create table-of-contents component in packages/hip-ui/src/components/table-of-contents/index.tsx
- [ ] Create table-of-contents-config.ts with dependencies
- [ ] Register component in packages/hip-ui/src/cli/install.tsx
- [ ] Update docs to import TableOfContents from hip-ui
- [ ] Delete old TableOfContents.tsx from apps/docs/src/lib

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: packages/hip-ui/src/types.ts</summary>

</details>
</tool-use>

---

---

Creating the component in hip-ui:

---

<tool-use data-tool-type="write" data-tool-name="write">

<details><summary>Tool use: **write** • Edit file: packages/hip-ui/src/components/table-of-contents/index.tsx</summary>

**Chunk 1**
Lines added: 170, lines removed: 1

```diff
@@ -1,1 +1,170 @@
-
+ "use client";
+
+ import { Toc, TocEntry } from "@stefanprobst/rehype-extract-toc";
+ import * as stylex from "@stylexjs/stylex";
+ import { createContext, use, useEffect, useState } from "react";
+
+ import { animationDuration } from "../theme/animations.stylex";
+ import { primaryColor, uiColor } from "../theme/color.stylex";
+ import { spacing } from "../theme/spacing.stylex";
+ import { fontSize } from "../theme/typography.stylex";
+ import { StyleXComponentProps } from "../theme/types";
+
+ const ActiveHeaderIdContext = createContext&lt;string | null&gt;(null);
+ const LevelContext = createContext(1);
+
+ const styles = stylex.create({
+   wrapper: {
+     boxSizing: "border-box",
+     display: "flex",
+     flexDirection: "column",
+     flexShrink: 0,
+     gap: spacing["2"],
+     height: "100vh",
+     marginTop: spacing["12"],
+     overflow: "auto",
+     paddingBottom: spacing["20"],
+     paddingTop: spacing["12"],
+     position: "sticky",
+     top: 0,
+   },
+   itemList: {
+     listStyle: "none",
+     margin: 0,
+     paddingLeft: 0,
+   },
+   item: {
+     alignItems: "center",
+     backgroundColor: {
+       default: "transparent",
+       ":hover": uiColor.component1,
+       ":hover::before": primaryColor.solid1,
+     },
+     borderLeftColor: {
+       default: uiColor.border1,
+     },
+     borderLeftStyle: "solid",
+     borderLeftWidth: 1,
+     color: {
+       default: uiColor.text1,
+     },
+     display: "flex",
+     fontSize: fontSize["sm"],
+     height: spacing[8],
+     position: "relative",
+     textDecoration: "none",
+     transitionDuration: animationDuration.fast,
+     transitionProperty: {
+       default: "color, border-left-color",
+       "@media (prefers-reduced-motion: reduce)": "none",
+     },
+     transitionTimingFunction: "ease-in-out",
+
+     "::before": {
+       bottom: 0,
+       content: "''",
+       left: 0,
+       position: "absolute",
+       top: 0,
+       width: 1,
+     },
+   },
+   level: (level: number) =&gt; ({
+     paddingLeft: &#96;calc(${spacing[4]} * ${level.toString()})&#96;,
+   }),
+   active: {
+     color: primaryColor.solid2,
+     borderLeftColor: primaryColor.solid1,
+
+     "::before": {
+       content: "''",
+       bottom: 0,
+       position: "absolute",
+       top: 0,
+       left: 0,
+       width: 1,
+       backgroundColor: primaryColor.solid1,
+     },
+   },
+ });
+
+ function TocItem({ id, value, children }: TocEntry) {
+   const level = use(LevelContext);
+   const activeHeaderId = use(ActiveHeaderIdContext);
+
+   return (
+     &lt;li key={id}&gt;
+       &lt;a
+         href={&#96;#${id ?? ""}&#96;}
+         {...stylex.props(
+           styles.item,
+           styles.level(level),
+           activeHeaderId === id &amp;&amp; styles.active,
+         )}
+       &gt;
+         {value}
+       &lt;/a&gt;
+       {children &amp;&amp; (
+         &lt;LevelContext value={level + 1}&gt;
+           &lt;ul {...stylex.props(styles.itemList)}&gt;
+             {children.map((child) =&gt; (
+               &lt;TocItem key={child.id} {...child} /&gt;
+             ))}
+           &lt;/ul&gt;
+         &lt;/LevelContext&gt;
+       )}
+     &lt;/li&gt;
+   );
+ }
+
+ /**
+  * TableOfContents component props.
+  */
+ export interface TableOfContentsProps
+   extends StyleXComponentProps&lt;{ toc: Toc }&gt; {}
+
+ /**
+  * A table of contents component that displays a navigation tree based on document headings.
+  * Automatically highlights the currently visible heading using IntersectionObserver.
+  */
+ export function TableOfContents({
+   toc,
+   style,
+ }: TableOfContentsProps) {
+   const [activeHeaderId, setActiveHeaderId] = useState&lt;string | null&gt;(null);
+
+   useEffect(() =&gt; {
+     const observer = new IntersectionObserver((entries) =&gt; {
+       for (const entry of entries) {
+         if (entry.isIntersecting &amp;&amp; entry.target.id) {
+           setActiveHeaderId(entry.target.id);
+         }
+       }
+     });
+
+     const headings = document.querySelectorAll("h1, h2, h3, h4, h5, h6");
+
+     for (const heading of headings) {
+       observer.observe(heading);
+     }
+
+     return () =&gt; {
+       observer.disconnect();
+     };
+   }, []);
+
+   return (
+     &lt;ActiveHeaderIdContext value={activeHeaderId}&gt;
+       &lt;nav {...stylex.props(styles.wrapper, style)}&gt;
+         &lt;LevelContext value={1}&gt;
+           &lt;ul {...stylex.props(styles.itemList)}&gt;
+             {toc.map((item) =&gt; (
+               &lt;TocItem key={item.id} {...item} /&gt;
+             ))}
+           &lt;/ul&gt;
+         &lt;/LevelContext&gt;
+       &lt;/nav&gt;
+     &lt;/ActiveHeaderIdContext&gt;
+   );
+ }
+
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="write">

<details><summary>Tool use: **write** • Edit file: packages/hip-ui/src/components/table-of-contents/table-of-contents-config.ts</summary>

**Chunk 1**
Lines added: 17, lines removed: 1

```diff
@@ -1,1 +1,17 @@
-
+ import { ComponentConfig } from "../../types";
+
+ export const tableOfContentsConfig: ComponentConfig = {
+   name: "table-of-contents",
+   filepath: "./index.tsx",
+   hipDependencies: [
+     "../theme/animations.stylex.tsx",
+     "../theme/color.stylex.tsx",
+     "../theme/spacing.stylex.tsx",
+     "../theme/typography.stylex.tsx",
+     "../theme/types.ts",
+   ],
+   dependencies: {
+     "@stefanprobst/rehype-extract-toc": "^3.0.0",
+   },
+ };
+
```

</details>

</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: packages/hip-ui/src/cli/install.tsx</summary>

</details>
</tool-use>

---

---

Registering the component in install.tsx:

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: packages/hip-ui/src/cli/install.tsx</summary>

**Chunk 1**
Lines added: 1, lines removed: undefined

```diff
@@ -74,4 +74,5 @@
  import { switchConfig } from "../components/switch/switch-config.js";
  import { tableConfig } from "../components/table/table-config.js";
+ import { tableOfContentsConfig } from "../components/table-of-contents/table-of-contents-config.js";
  import { tabsConfig } from "../components/tabs/tabs-config.js";
  import { tagGroupConfig } from "../components/tag-group/tag-group-config.js";
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: packages/hip-ui/src/cli/install.tsx</summary>

**Chunk 1**
Lines added: 1, lines removed: undefined

```diff
@@ -148,4 +148,5 @@
    sidebarLayoutConfig,
    tableConfig,
+   tableOfContentsConfig,
    sliderConfig,
    tagGroupConfig,
```

</details>

</tool-use>

---

<tool-use data-tool-type="task" data-tool-name="todo_write">
<details><summary>Tool use: **todo_write** • Todo List</summary>

- [x] Create table-of-contents component in packages/hip-ui/src/components/table-of-contents/index.tsx
- [x] Create table-of-contents-config.ts with dependencies
- [x] Register component in packages/hip-ui/src/cli/install.tsx
- [-] Update docs to import TableOfContents from hip-ui
- [ ] Delete old TableOfContents.tsx from apps/docs/src/lib

</details>
</tool-use>

---

---

Checking how components are exported from hip-ui:

---

<tool-use data-tool-type="generic" data-tool-name="glob_file_search">
<details>
<summary>Tool use: **glob_file_search** • Searched codebase "**/index.ts" • **1** result in **1** directory</summary>

Directory: **/Users/andrew/Documents/hip-ui/packages/hip-ui/src** (1 file)

| File                        |
| --------------------------- |
| `components/toast/index.ts` |

</details>
</tool-use>

---

<tool-use data-tool-type="search" data-tool-name="codebase_search">
<details>
                <summary>Tool use: **codebase_search** • Searched codebase "How are components exported from hip-ui package?" • **15** results</summary>
            
| File | Lines |
|------|-------|
| `packages/hip-ui/src/types.ts` | L7 |
| `packages/hip-ui/package.json` | L52 |
| `packages/hip-ui/src/cli/install.tsx` | L412-488 |
| `packages/hip-ui/src/cli/bin.ts` | L45 |
| `packages/hip-ui/src/components/button/button-config.ts` | L50 |
| `packages/hip-ui/src/components/command-menu/command-menu-config.ts` | L16 |
| `packages/hip-ui/src/cli/install.tsx` | L90-174 |
| `packages/hip-ui/src/components/menu/menu-config.ts` | L10 |
| `packages/hip-ui/src/components/typography/typography-config.ts` | L13 |
| `packages/hip-ui/src/components/footer/index.tsx` | L461-503 |
| `packages/hip-ui/src/components/empty-state/empty-state-config.ts` | L12 |
| `packages/hip-ui/src/components/image-cropper/index.tsx` | L334-355 |
| `packages/hip-ui/src/components/card/card-config.ts` | L9 |
| `packages/hip-ui/src/components/tabs/tabs-config.ts` | L17 |
| `packages/hip-ui/src/components/content/content-config.ts` | L10 |

</details>
</tool-use>

---

---

Checking how the docs app imports components:

---

<tool-use data-tool-type="search" data-tool-name="grep">
<details>
<summary>Tool use: **grep** • Grep for "from "@/components/" in "apps/docs/src/routes/docs.$.tsx" • 5 matches</summary>

Output mode: content

| File                              | Content                                                                    | Line |
| --------------------------------- | -------------------------------------------------------------------------- | ---- |
| `apps/docs/src/routes/docs.$.tsx` | `import \{ Flex \} from "@/components/flex";`                              | L32  |
| `apps/docs/src/routes/docs.$.tsx` | `import \{ LinkProps, Link as TypographyLink \} from "@/components/link";` | L33  |
| `apps/docs/src/routes/docs.$.tsx` | `\} from "@/components/typography";`                                       | L47  |
| `apps/docs/src/routes/docs.$.tsx` | `import \{ Text \} from "@/components/typography/text";`                   | L48  |
| `apps/docs/src/routes/docs.$.tsx` | `import \{ Content \} from "@/components/content";`                        | L56  |

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: apps/docs/tsconfig.json</summary>

</details>
</tool-use>

---

---

Checking if the docs app has its own components directory or imports from hip-ui:

---

<tool-use data-tool-type="generic" data-tool-name="list_dir">
<details>
            <summary>Tool use: **list_dir** • Listed directory, 0 results</summary>
        
No results found
</details>
</tool-use>

---

<tool-use data-tool-type="search" data-tool-name="grep">
<details>
<summary>Tool use: **grep** • Grep for "from.*hip-ui" in "apps/docs" • 0 matches</summary>

Output mode: content

_No matches found_

</details>
</tool-use>

---

---

Copying the component to the docs app and updating the import:

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: packages/hip-ui/src/components/table-of-contents/index.tsx</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="write">

<details><summary>Tool use: **write** • Edit file: apps/docs/src/components/table-of-contents/index.tsx</summary>

**Chunk 1**
Lines added: 170, lines removed: 1

```diff
@@ -1,1 +1,170 @@
-
+ "use client";
+
+ import { Toc, TocEntry } from "@stefanprobst/rehype-extract-toc";
+ import * as stylex from "@stylexjs/stylex";
+ import { createContext, use, useEffect, useState } from "react";
+
+ import { animationDuration } from "../theme/animations.stylex";
+ import { primaryColor, uiColor } from "../theme/color.stylex";
+ import { spacing } from "../theme/spacing.stylex";
+ import { fontSize } from "../theme/typography.stylex";
+ import { StyleXComponentProps } from "../theme/types";
+
+ const ActiveHeaderIdContext = createContext&lt;string | null&gt;(null);
+ const LevelContext = createContext(1);
+
+ const styles = stylex.create({
+   wrapper: {
+     boxSizing: "border-box",
+     display: "flex",
+     flexDirection: "column",
+     flexShrink: 0,
+     gap: spacing["2"],
+     height: "100vh",
+     marginTop: spacing["12"],
+     overflow: "auto",
+     paddingBottom: spacing["20"],
+     paddingTop: spacing["12"],
+     position: "sticky",
+     top: 0,
+   },
+   itemList: {
+     listStyle: "none",
+     margin: 0,
+     paddingLeft: 0,
+   },
+   item: {
+     alignItems: "center",
+     backgroundColor: {
+       default: "transparent",
+       ":hover": uiColor.component1,
+       ":hover::before": primaryColor.solid1,
+     },
+     borderLeftColor: {
+       default: uiColor.border1,
+     },
+     borderLeftStyle: "solid",
+     borderLeftWidth: 1,
+     color: {
+       default: uiColor.text1,
+     },
+     display: "flex",
+     fontSize: fontSize["sm"],
+     height: spacing[8],
+     position: "relative",
+     textDecoration: "none",
+     transitionDuration: animationDuration.fast,
+     transitionProperty: {
+       default: "color, border-left-color",
+       "@media (prefers-reduced-motion: reduce)": "none",
+     },
+     transitionTimingFunction: "ease-in-out",
+
+     "::before": {
+       bottom: 0,
+       content: "''",
+       left: 0,
+       position: "absolute",
+       top: 0,
+       width: 1,
+     },
+   },
+   level: (level: number) =&gt; ({
+     paddingLeft: &#96;calc(${spacing[4]} * ${level.toString()})&#96;,
+   }),
+   active: {
+     color: primaryColor.solid2,
+     borderLeftColor: primaryColor.solid1,
+
+     "::before": {
+       content: "''",
+       bottom: 0,
+       position: "absolute",
+       top: 0,
+       left: 0,
+       width: 1,
+       backgroundColor: primaryColor.solid1,
+     },
+   },
+ });
+
+ function TocItem({ id, value, children }: TocEntry) {
+   const level = use(LevelContext);
+   const activeHeaderId = use(ActiveHeaderIdContext);
+
+   return (
+     &lt;li key={id}&gt;
+       &lt;a
+         href={&#96;#${id ?? ""}&#96;}
+         {...stylex.props(
+           styles.item,
+           styles.level(level),
+           activeHeaderId === id &amp;&amp; styles.active,
+         )}
+       &gt;
+         {value}
+       &lt;/a&gt;
+       {children &amp;&amp; (
+         &lt;LevelContext value={level + 1}&gt;
+           &lt;ul {...stylex.props(styles.itemList)}&gt;
+             {children.map((child) =&gt; (
+               &lt;TocItem key={child.id} {...child} /&gt;
+             ))}
+           &lt;/ul&gt;
+         &lt;/LevelContext&gt;
+       )}
+     &lt;/li&gt;
+   );
+ }
+
+ /**
+  * TableOfContents component props.
+  */
+ export interface TableOfContentsProps
+   extends StyleXComponentProps&lt;{ toc: Toc }&gt; {}
+
+ /**
+  * A table of contents component that displays a navigation tree based on document headings.
+  * Automatically highlights the currently visible heading using IntersectionObserver.
+  */
+ export function TableOfContents({
+   toc,
+   style,
+ }: TableOfContentsProps) {
+   const [activeHeaderId, setActiveHeaderId] = useState&lt;string | null&gt;(null);
+
+   useEffect(() =&gt; {
+     const observer = new IntersectionObserver((entries) =&gt; {
+       for (const entry of entries) {
+         if (entry.isIntersecting &amp;&amp; entry.target.id) {
+           setActiveHeaderId(entry.target.id);
+         }
+       }
+     });
+
+     const headings = document.querySelectorAll("h1, h2, h3, h4, h5, h6");
+
+     for (const heading of headings) {
+       observer.observe(heading);
+     }
+
+     return () =&gt; {
+       observer.disconnect();
+     };
+   }, []);
+
+   return (
+     &lt;ActiveHeaderIdContext value={activeHeaderId}&gt;
+       &lt;nav {...stylex.props(styles.wrapper, style)}&gt;
+         &lt;LevelContext value={1}&gt;
+           &lt;ul {...stylex.props(styles.itemList)}&gt;
+             {toc.map((item) =&gt; (
+               &lt;TocItem key={item.id} {...item} /&gt;
+             ))}
+           &lt;/ul&gt;
+         &lt;/LevelContext&gt;
+       &lt;/nav&gt;
+     &lt;/ActiveHeaderIdContext&gt;
+   );
+ }
+
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: apps/docs/src/routes/docs.$.tsx</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -47,6 +47,6 @@
  } from "@/components/typography";
  import { Text } from "@/components/typography/text";
+ import { TableOfContents } from "@/components/table-of-contents";
  import { CopyToClipboardButton } from "@/lib/CopyToClipboardButton";
- import { TableOfContents } from "@/lib/TableOfContents";

  import { animationDuration } from "../components/theme/animations.stylex";
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="delete_file">
<details><summary>Tool use: **delete_file**</summary>

Explanation: undefined

</details>
</tool-use>

---

<tool-use data-tool-type="task" data-tool-name="todo_write">
<details><summary>Tool use: **todo_write** • Todo List</summary>

- [x] Create table-of-contents component in packages/hip-ui/src/components/table-of-contents/index.tsx
- [x] Create table-of-contents-config.ts with dependencies
- [x] Register component in packages/hip-ui/src/cli/install.tsx
- [x] Update docs to import TableOfContents from hip-ui
- [x] Delete old TableOfContents.tsx from apps/docs/src/lib

</details>
</tool-use>

---

---

Checking for linting errors:

---

<tool-use data-tool-type="generic" data-tool-name="read_lints">
<details>
          <summary>Tool use: **read_lints** • Read lints for 4 files</summary>
      
Lint paths:

- `packages/hip-ui/src/components/table-of-contents`
- `packages/hip-ui/src/cli/install.tsx`
- `apps/docs/src/components/table-of-contents`
- `apps/docs/src/routes/docs.$.tsx`

Lint results

**No lint errors found**

</details>
</tool-use>

---

---

## Summary

1. Created the component in hip-ui: `packages/hip-ui/src/components/table-of-contents/index.tsx`
   - Uses hip-ui theme tokens (color, spacing, typography, animations)
   - Includes JSDoc comments for props
   - Uses `"use client"` directive for React hooks

2. Created the config file: `packages/hip-ui/src/components/table-of-contents/table-of-contents-config.ts`
   - Lists all theme dependencies
   - Includes `@stefanprobst/rehype-extract-toc` as an external dependency

3. Registered the component: Added to `COMPONENT_CONFIGS` in `packages/hip-ui/src/cli/install.tsx`
   - Imported the config
   - Added to the component list

4. Updated the docs app:
   - Copied the component to `apps/docs/src/components/table-of-contents/index.tsx`
   - Updated the import in `apps/docs/src/routes/docs.$.tsx` to use `@/components/table-of-contents`
   - Deleted the old `apps/docs/src/lib/TableOfContents.tsx` file

The component is now part of the hip-ui package and can be installed using `pnpm hip install table-of-contents`. The docs app now imports it from the components directory, consistent with other hip-ui components.

---

_**User (2025-12-24 21:30Z)**_

add the docs

---

_**Agent (model default, mode Agent)**_

---

Adding documentation for the table-of-contents component. Checking existing docs structure and examples:

---

<tool-use data-tool-type="generic" data-tool-name="list_dir">
<details>
            <summary>Tool use: **list_dir** • Listed directory, 0 results</summary>
        
No results found
</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: apps/docs/src/docs/components/navigation/sidebar-layout.mdx</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="search" data-tool-name="codebase_search">
<details>
                <summary>Tool use: **codebase_search** • Searched codebase "What category should table of contents be in for documentation?" • **15** results</summary>
            
| File | Lines |
|------|-------|
| `apps/docs/src/docs/components/navigation/sidebar.mdx` | L53 |
| `apps/docs/src/docs/components/collections/table.mdx` | L60 |
| `apps/docs/src/docs/components/content/typography.mdx` | L47 |
| `apps/docs/src/docs/components/content/content.mdx` | L55 |
| `apps/docs/src/docs/components/collections/tree.mdx` | L49 |
| `apps/docs/src/docs/components/navigation/tabs.mdx` | L54 |
| `apps/docs/src/docs/components/navigation/navbar.mdx` | L66 |
| `apps/docs/src/docs/components/navigation/breadcrumbs.mdx` | L40 |
| `apps/docs/src/docs/components/content/text.mdx` | L60 |
| `apps/docs/src/docs/components/navigation/header-layout.mdx` | L54 |
| `apps/docs/src/docs/components/content/card.mdx` | L61 |
| `apps/docs/src/docs/components/content/kbd.mdx` | L66 |
| `apps/docs/src/docs/components/collections/listbox.mdx` | L41 |
| `apps/docs/src/docs/components/navigation/sidebar-layout.mdx` | L45 |
| `apps/docs/src/docs/components/content/separator.mdx` | L40 |

</details>
</tool-use>

---

---

Checking an example file structure:

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: apps/docs/src/examples/sidebar-layout/basic.tsx</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: apps/docs/src/docs/components/navigation/breadcrumbs.mdx</summary>

</details>
</tool-use>

---

---

Creating the documentation and example files:

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: packages/hip-ui/src/components/table-of-contents/index.tsx</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="write">

<details><summary>Tool use: **write** • Edit file: apps/docs/src/examples/table-of-contents/basic.tsx</summary>

**Chunk 1**
Lines added: 145, lines removed: 1

```diff
@@ -1,1 +1,145 @@
-
+ import { TableOfContents } from "@/components/table-of-contents";
+ import { Content } from "@/components/content";
+ import { Heading1, Heading2, Heading3, Body } from "@/components/typography";
+ import { Flex } from "@/components/flex";
+ import * as stylex from "@stylexjs/stylex";
+ import { spacing } from "@/components/theme/spacing.stylex";
+ import { containerBreakpoints } from "@/components/theme/media-queries.stylex";
+
+ const styles = stylex.create({
+   root: {
+     width: "100%",
+     gap: {
+       default: spacing["4"],
+       [containerBreakpoints.lg]: spacing["8"],
+     },
+     display: "grid",
+     gridTemplateColumns: {
+       default: "minmax(0, 1fr)",
+       [containerBreakpoints.lg]: "minmax(0, 1fr) 240px",
+     },
+   },
+ });
+
+ // Mock table of contents data
+ const toc = [
+   {
+     id: "introduction",
+     value: "Introduction",
+     children: [],
+   },
+   {
+     id: "getting-started",
+     value: "Getting Started",
+     children: [
+       {
+         id: "installation",
+         value: "Installation",
+         children: [],
+       },
+       {
+         id: "configuration",
+         value: "Configuration",
+         children: [],
+       },
+     ],
+   },
+   {
+     id: "components",
+     value: "Components",
+     children: [
+       {
+         id: "button",
+         value: "Button",
+         children: [
+           {
+             id: "button-props",
+             value: "Props",
+             children: [],
+           },
+           {
+             id: "button-examples",
+             value: "Examples",
+             children: [],
+           },
+         ],
+       },
+       {
+         id: "card",
+         value: "Card",
+         children: [],
+       },
+     ],
+   },
+   {
+     id: "advanced",
+     value: "Advanced",
+     children: [],
+   },
+ ];
+
+ export function Basic() {
+   return (
+     &lt;Flex direction="column" gap="4" style={styles.root}&gt;
+       &lt;Content&gt;
+         &lt;Heading1 id="introduction"&gt;Introduction&lt;/Heading1&gt;
+         &lt;Body&gt;
+           This is an introduction to the table of contents component. The table
+           of contents automatically highlights the currently visible heading as
+           you scroll through the document.
+         &lt;/Body&gt;
+
+         &lt;Heading1 id="getting-started"&gt;Getting Started&lt;/Heading1&gt;
+         &lt;Body&gt;
+           Get started with the table of contents component by following these
+           steps.
+         &lt;/Body&gt;
+
+         &lt;Heading2 id="installation"&gt;Installation&lt;/Heading2&gt;
+         &lt;Body&gt;
+           Install the component using the hip CLI tool. The component will be
+           added to your project with all necessary dependencies.
+         &lt;/Body&gt;
+
+         &lt;Heading2 id="configuration"&gt;Configuration&lt;/Heading2&gt;
+         &lt;Body&gt;
+           Configure the component to match your design system. The component
+           uses theme tokens for consistent styling.
+         &lt;/Body&gt;
+
+         &lt;Heading1 id="components"&gt;Components&lt;/Heading1&gt;
+         &lt;Body&gt;
+           Explore the various components available in the design system.
+         &lt;/Body&gt;
+
+         &lt;Heading2 id="button"&gt;Button&lt;/Heading2&gt;
+         &lt;Body&gt;
+           The button component is a versatile component for user interactions.
+         &lt;/Body&gt;
+
+         &lt;Heading3 id="button-props"&gt;Props&lt;/Heading3&gt;
+         &lt;Body&gt;
+           The button component accepts various props for customization.
+         &lt;/Body&gt;
+
+         &lt;Heading3 id="button-examples"&gt;Examples&lt;/Heading3&gt;
+         &lt;Body&gt;
+           See examples of how to use the button component in different contexts.
+         &lt;/Body&gt;
+
+         &lt;Heading2 id="card"&gt;Card&lt;/Heading2&gt;
+         &lt;Body&gt;
+           The card component is used for grouping related content together.
+         &lt;/Body&gt;
+
+         &lt;Heading1 id="advanced"&gt;Advanced&lt;/Heading1&gt;
+         &lt;Body&gt;
+           Learn about advanced features and customization options for the table
+           of contents component.
+         &lt;/Body&gt;
+       &lt;/Content&gt;
+       &lt;TableOfContents toc={toc} /&gt;
+     &lt;/Flex&gt;
+   );
+ }
+
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="write">

<details><summary>Tool use: **write** • Edit file: apps/docs/src/docs/components/navigation/table-of-contents.mdx</summary>

**Chunk 1**
Lines added: 73, lines removed: 1

```diff
@@ -1,1 +1,73 @@
-
+ ---
+ title: TableOfContents
+ description: A table of contents component that displays a navigation tree based on document headings and automatically highlights the currently visible section.
+ ---
+
+ import { PropDocs } from '../../../lib/PropDocs'
+ import { Example } from '../../../lib/Example'
+ import { Basic } from '../../../examples/table-of-contents/basic'
+
+ &lt;Example src={Basic} noPadding /&gt;
+
+ ## Installation
+
+ Run the following command to add the table of contents component to your project.
+
+ &#96;&#96;&#96;bash
+ pnpm hip install table-of-contents
+ &#96;&#96;&#96;
+
+ ## Props
+
+ &lt;PropDocs components={["TableOfContents"]} /&gt;
+
+ ## Features
+
+ ### Automatic Active Section Highlighting
+
+ The table of contents automatically highlights the currently visible heading using an IntersectionObserver. As you scroll through the document, the active section in the table of contents updates to reflect your current position.
+
+ ### Hierarchical Navigation
+
+ The component supports nested headings, creating a hierarchical navigation structure that matches your document's heading structure.
+
+ ### Sticky Positioning
+
+ The table of contents is positioned as a sticky element, remaining visible as you scroll through long documents.
+
+ ## Usage
+
+ The table of contents component requires a &#96;toc&#96; prop that follows the structure from &#96;@stefanprobst/rehype-extract-toc&#96;. This is typically generated automatically when processing markdown files with the rehype-extract-toc plugin.
+
+ &#96;&#96;&#96;tsx
+ import { TableOfContents } from "@/components/table-of-contents";
+
+ const toc = [
+   {
+     id: "introduction",
+     value: "Introduction",
+     children: [],
+   },
+   {
+     id: "getting-started",
+     value: "Getting Started",
+     children: [
+       {
+         id: "installation",
+         value: "Installation",
+         children: [],
+       },
+     ],
+   },
+ ];
+
+ &lt;TableOfContents toc={toc} /&gt;
+ &#96;&#96;&#96;
+
+ ## Related Components
+
+ - [Sidebar](/docs/components/navigation/sidebar) - For navigation menus
+ - [Breadcrumbs](/docs/components/navigation/breadcrumbs) - For showing navigation path
+ - [Link](/docs/components/navigation/link) - For navigation links
+ - [Content](/docs/components/content/content) - For document content layout
+
```

</details>

</tool-use>

---

<tool-use data-tool-type="task" data-tool-name="todo_write">
<details><summary>Tool use: **todo_write** • Todo List</summary>

- [x] Create MDX documentation file for table-of-contents
- [x] Create basic example file for table-of-contents

</details>
</tool-use>

---

---

Checking for linting errors:

---

<tool-use data-tool-type="generic" data-tool-name="read_lints">
<details>
          <summary>Tool use: **read_lints** • Read lints for 2 files</summary>
      
Lint paths:

- `apps/docs/src/examples/table-of-contents`
- `apps/docs/src/docs/components/navigation/table-of-contents.mdx`

Lint results

**No lint errors found**

</details>
</tool-use>

---

---

Documentation added for the table-of-contents component.

## Created Files

1. **Documentation MDX**: `apps/docs/src/docs/components/navigation/table-of-contents.mdx`
   - Placed in the `navigation` category
   - Includes installation instructions
   - Documents props using PropDocs
   - Describes features (automatic highlighting, hierarchical navigation, sticky positioning)
   - Includes usage examples and related components

2. **Basic Example**: `apps/docs/src/examples/table-of-contents/basic.tsx`
   - Demonstrates the component with a mock table of contents
   - Shows hierarchical heading structure
   - Includes sample content with headings to demonstrate the active section highlighting
   - Uses the same layout pattern as the docs app (Content + TableOfContents side-by-side)

The documentation follows the same structure and style as other components in the navigation category. The example demonstrates the component's functionality with a realistic table of contents structure.

---
